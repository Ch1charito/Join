<section>
  <div class="content">
    <app-side-bar></app-side-bar>
    <div class="header-and-content">
      <app-header></app-header>
      <div class="contacts">
        <div class="contact-sidebar">
          <button id="new-contact-btn-resp">
            <img
              src="/assets/images/resp-btn/new-contact-btn-resp.png"
              alt=""
            />
          </button>
          <button class="new-contact-btn" (click)="openAddContact()">
            Add new contact <img src="./assets/icons/person_add.png" alt="" />
          </button>
          
          @for (item of firebaseService.contactList; let i = $index; track $index) {<!--  @if (i
          === 0 || contact.name.charAt(0).toUpperCase() !== contacts[i -
          1].name.charAt(0).toUpperCase()) {
          <div class="contact-letter">
            <span>{{ contact.name.charAt(0).toUpperCase() }}</span>
            <hr class="brake-line" />
          </div>
          } -->

          <div class="contact-list" (click)="openSelectedContact(i)">
            <!-- <div class="initials" [style.background-color]="contact.color">
              {{ getInitials(contact.name) }}
            </div> -->
            <ul>
              <li>{{ item.name }}</li>
              <li>
                <a href="mailto:{{ item.email }}">{{ item.email }}</a>
              </li>
            </ul>
          </div>
          }
          <!-- <div>
            <section>
              @for (item of firebaseService.contactList; track $index) {
              @if(!isEdited) {
              <p>
                {{ item.name }} - {{ item.email }}
                <button (click)="editContact($index)">Edit</button>
                <button (click)="deleteContact($index)">Delete</button>
              </p>
              } } @if(isEdited && selectedContactIndex !== null) {
              <form (ngSubmit)="saveEdit()">
                <input
                  type="text"
                  [(ngModel)]="editedContact.name"
                  name="name"
                />
                <input
                  type="text"
                  [(ngModel)]="editedContact.email"
                  name="email"
                />
                <button
                  type="submit"
                  [disabled]="!editedContact.name || !editedContact.email"
                >
                  Save
                </button>
                <button type="button" (click)="cancelEdit()">Cancel</button>
              </form>
              }
            </section>
          </div> -->
        </div>

        <div class="mohammad">
          <div id="header">
            <h1>Contacts</h1>
            <div id="line"></div>
            <span>Better with a team</span>
          </div>

          @if (showSelectedContact){
            <div id="info">
            <div id="contact-title">
              <img src="/assets/images/name-info.png" alt="name-info" />
              <h1>{{selectedContact.name}}</h1>
            </div>
            <div id="icons">
              <button (click)="openEditContact()">
                <img src="assets/images/edit.png" alt="edit" />
                <p>Edit</p>
              </button>
              <button>
                <img src="assets/images/delete.png" alt="delete" />
                <p>Delete</p>
              </button>
            </div>
            <div id="contact-information">
              <p>Contact Information</p>
            </div>
            <div id="mail-phone">
              <h3>Email</h3>
              <p>{{selectedContact.email}}</p>
              <h3>Phone</h3>
              <p>{{selectedContact.phone}}</p>
            </div>
          </div>
          }
          
        </div>

        <app-add-contact-overlay
          [class.d-none]="!showOverlay"
          (close)="openAddContact()"
        ></app-add-contact-overlay>
        <app-edit-contact-overlay
          [class.d-none]="!showEditOverlay"
          (close)="openEditContact()"
        ></app-edit-contact-overlay>
      </div>
    </div>
  </div>
</section>
